<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <title>shunt by jmervine</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>shunt</h1>
        <h2>Simple Shell Testing Pseudo-Framework</h2>

        <section id="downloads">
          <a href="https://github.com/jmervine/shunt/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/jmervine/shunt/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/jmervine/shunt" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <p><img src="screenshots/shunt.png" alt="Simple Shell Testing Pseudo-Framework"></p>

<p><img src="screenshots/shunt_verbose.png" alt="Simple Shell Testing Pseudo-Framework"></p>

<p><img src="screenshots/shunt_quiet.png" alt="Simple Shell Testing Pseudo-Framework"></p>

<h3>
<a name="what-why" class="anchor" href="#what-why"><span class="octicon octicon-link"></span></a>What!? Why?</h3>

<p>For a recent project, I wanted a very simple way to run some simple tests against my script output.
I know there are a number of these kinds of things out there, but most of the ones I looked at were more complex then I wanted.
To start, I created a basic shell script to test my scripts, but as I began to add to it, and want more from it, I decided to take
a few minutes and build a pseudo-framework out of it.</p>

<p>I call it a "pseudo-framework" because it's really more of a helper, which gives you a handfull of assertions to run against
bash commands. Well, that and it doesn't really have a name.</p>

<h3>
<a name="how" class="anchor" href="#how"><span class="octicon octicon-link"></span></a>How?</h3>

<h5>
<a name="install" class="anchor" href="#install"><span class="octicon octicon-link"></span></a>Install</h5>

<p>Note, in shunt <code>latest</code> means latest stable version.</p>

<pre><code>curl -L https://raw.github.com/jmervine/shunt/master/install.sh | bash
# installs latest to ~/.bin/shunt

curl -L https://raw.github.com/jmervine/shunt/master/install.sh | bash -s master
# installs master to ~/.bin/shunt

curl -L https://raw.github.com/jmervine/shunt/master/install.sh | bash -s global
# installs latest to /usr/local/bin/shunt

curl -L https://raw.github.com/jmervine/shunt/master/install.sh | bash -s master local
# installs master to ./shunt.sh
</code></pre>

<h5>
<a name="basic-usage" class="anchor" href="#basic-usage"><span class="octicon octicon-link"></span></a>Basic Usage</h5>

<p>A basic test file looks like this:</p>

<pre><code># file: tests.sh

function run_tests {
####################################################
# Tests go here.
####################################################
  COMMAND="/path/to/your/command"
  assert_grep "$COMMAND" "Usage" \
    "deplay usage without params"
  assert_grep "$COMMAND --help" "Usage" \
    "deplay usage with help"
  assert_grep "$COMMAND --arg2 foobar" "Usage" \
    "deplay usage without required arg"
  refute_grep "$COMMAND --arg1 foobar" "Usage" \
    "work with required arg"
####################################################
}
</code></pre>

<p>Run like this:</p>

<pre><code>$ ./shunt.sh ./tests.sh
</code></pre>

<p>Usage:</p>

<div class="highlight highlight-bash"><pre>Usage: ./shunt.sh &lt;<span class="nb">test </span>files&gt;

Options:
--plain    Disable colors and icons.
--quiet    Do not print error messages.
--verbose  Display success messages.
--version  Display version information.
--help     Display this message.
</pre></div>

<blockquote>
<p>See <code>test/testOne.sh</code> for more examples.</p>
</blockquote>

<h5>
<a name="before--after-hooks" class="anchor" href="#before--after-hooks"><span class="octicon octicon-link"></span></a>Before / After Hooks</h5>

<p>In addition to assertion, shunt also supports before and after hooks. Simply define a <code>before</code> or <code>after</code> function.</p>

<pre><code>function before {
    ./some_setup_script.sh
    echo "Running before shunt assertions.
}

function after {
    ./some_cleanup_script.sh
    echo "Running after shunt assertions.
}
</code></pre>

<h5>
<a name="assertions" class="anchor" href="#assertions"><span class="octicon octicon-link"></span></a>Assertions</h5>

<p>Here's a full list of assertions at the time of this writing:</p>

<ul>
<li><code>assert "CMD" "FAIL MESSAGE"</code></li>
<li><code>refute "CMD" "FAIL MESSAGE"</code></li>
<li><code>assert_equal "FIRST" "SECOND" "FAIL MESSAGE"</code></li>
<li><code>refute_equal "FIRST" "SECOND" "FAIL MESSAGE"</code></li>
<li><code>assert_numeq "FIRST" "SECOND" "FAIL MESSAGE"</code></li>
<li><code>refute_numeq "FIRST" "SECOND" "FAIL MESSAGE"</code></li>
<li><code>assert_grep "CMD" "GREP" "FAIL MESSAGE"</code></li>
<li><code>refute_grep "CMD" "GREP" "FAIL MESSAGE"</code></li>
<li><code>assert_file "FILE" "FAIL MESSAGE"</code></li>
<li><code>refute_file "FILE" "FAIL MESSAGE"</code></li>
<li><code>assert_dir "DIR" "FAIL MESSAGE"</code></li>
<li><code>refute_dir "DIR" "FAIL MESSAGE"</code></li>
</ul><h5>
<a name="known-issues" class="anchor" href="#known-issues"><span class="octicon octicon-link"></span></a>Known Issues</h5>

<p>Currently, <code>assert_grep</code> and <code>refute_grep</code> only support a single word, no spaces. I'm sure there's a simple solution to this, but I haven't had
a change to troubleshoot it yet and it wasn't an issue for my use case.</p>

<h3>
<a name="development" class="anchor" href="#development"><span class="octicon octicon-link"></span></a>Development</h3>

<ul>
<li>To run tests use: <code>make test</code>
</li>
<li>To update clistyle.sh, use: <code>make clistyle</code>
</li>
</ul>
      </section>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-45296232-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>